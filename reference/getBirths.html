<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reformat full birth records into person-month format — getBirths • SUMMER</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reformat full birth records into person-month format — getBirths"><meta name="description" content="Reformat full birth records into person-month format"><meta property="og:description" content="Reformat full birth records into person-month format"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SUMMER</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/web_only/small-area-estimation.html">Generic small area estimation</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/u5mr-vignette.html">Estimating Subnational U5MR using Simulated Data</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/u5mr-dhs-vignette.html">Estimating Subnational U5MR using DHS Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/richardli/SUMMER/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reformat full birth records into person-month format</h1>
      <small class="dont-index">Source: <a href="https://github.com/richardli/SUMMER/blob/master/R/getBirths.R" class="external-link"><code>R/getBirths.R</code></a></small>
      <div class="d-none name"><code>getBirths.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reformat full birth records into person-month format</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getBirths</span><span class="op">(</span></span>
<span>  filepath <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  surveyyear <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"caseid"</span>, <span class="st">"v001"</span>, <span class="st">"v002"</span>, <span class="st">"v004"</span>, <span class="st">"v005"</span>, <span class="st">"v021"</span>, <span class="st">"v022"</span>, <span class="st">"v023"</span>, <span class="st">"v024"</span>,</span>
<span>    <span class="st">"v025"</span>, <span class="st">"v139"</span>, <span class="st">"bidx"</span><span class="op">)</span>,</span>
<span>  strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v024"</span>, <span class="st">"v025"</span><span class="op">)</span>,</span>
<span>  dob <span class="op">=</span> <span class="st">"b3"</span>,</span>
<span>  alive <span class="op">=</span> <span class="st">"b5"</span>,</span>
<span>  age <span class="op">=</span> <span class="st">"b7"</span>,</span>
<span>  age.truncate <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  date.interview <span class="op">=</span> <span class="st">"v008"</span>,</span>
<span>  month.cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">12</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  year.cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1980</span>, <span class="fl">2020</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  min.last.period <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cmc.adjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  compact <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  compact.by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v001"</span>, <span class="st">"v024"</span>, <span class="st">"v025"</span>, <span class="st">"v005"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-filepath">filepath<a class="anchor" aria-label="anchor" href="#arg-filepath"></a></dt>
<dd><p>file path of raw .dta file from DHS. Only used when data frame is not provided in the function call.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data frame of a DHS survey</p></dd>


<dt id="arg-surveyyear">surveyyear<a class="anchor" aria-label="anchor" href="#arg-surveyyear"></a></dt>
<dd><p>year of survey. Observations after this year will be excluded from the analysis.</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>vector of variables to be used in obtaining the person-month files. The variables correspond the the DHS recode manual VI. For early DHS data, the variable names may need to be changed.</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>vector of variable names used for strata. If a single variable is specified, then that variable will be used as strata indicator If multiple variables are specified, the interaction of these variables will be used as strata indicator.</p></dd>


<dt id="arg-dob">dob<a class="anchor" aria-label="anchor" href="#arg-dob"></a></dt>
<dd><p>variable name for the date of birth.</p></dd>


<dt id="arg-alive">alive<a class="anchor" aria-label="anchor" href="#arg-alive"></a></dt>
<dd><p>variable name for the indicator of whether child was alive or dead at the time of interview. It should be factor or character variable with levels "no" or "yes". Other coding scheme will not be recognized and can lead to errors.</p></dd>


<dt id="arg-age">age<a class="anchor" aria-label="anchor" href="#arg-age"></a></dt>
<dd><p>variable name for the age at death of the child in completed months.</p></dd>


<dt id="arg-age-truncate">age.truncate<a class="anchor" aria-label="anchor" href="#arg-age-truncate"></a></dt>
<dd><p>the smallest age in months where only full years are reported. The default value is 24, which corresponds to the DHS practice of recording only age in full years for children over 2 years old. That is, for children with age starting from 24 months old, we assume the age variable reported in multiples of 12 are truncated from its true value. For example, children between age 24 to 35 months are all recorded as 24. To account for the truncation of age, 5 months are added to all ages recorded in multiples of 12 starting from 24. To avoid this adjustment, set this argument to NA.</p></dd>


<dt id="arg-date-interview">date.interview<a class="anchor" aria-label="anchor" href="#arg-date-interview"></a></dt>
<dd><p>variable name for the date of interview.</p></dd>


<dt id="arg-month-cut">month.cut<a class="anchor" aria-label="anchor" href="#arg-month-cut"></a></dt>
<dd><p>the cutoff of each bins of age group in the unit of months. Default values are 1, 12, 24, 36, 48, and 60, representing the age groups (0, 1), [1, 12), [12, 24), ..., [48, 60).</p></dd>


<dt id="arg-year-cut">year.cut<a class="anchor" aria-label="anchor" href="#arg-year-cut"></a></dt>
<dd><p>The cutoff of each bins of time periods, including both boundaries. Default values are 1980, 1985, ..., 2020, representing the time periods 80-84, 85-89, ..., 15-19. Notice that if each bin contains one year, the last year in the output is max(year.cut)-1. For example, if year.cut = 1980:2020, the last year in the output is 2019.</p></dd>


<dt id="arg-min-last-period">min.last.period<a class="anchor" aria-label="anchor" href="#arg-min-last-period"></a></dt>
<dd><p>The cutoff for how many years the last period must contain in order to be counted in the output. For example, if the last period is 2015-2019 and min.last.period = 3, person-months for the last period will only be returned if survey contains observations at least in 2017. This argument avoids the situation that estimates for the last period being based on only a small number of initial years, if applicable. Default to be 0.</p></dd>


<dt id="arg-cmc-adjust">cmc.adjust<a class="anchor" aria-label="anchor" href="#arg-cmc-adjust"></a></dt>
<dd><p>number of months to add to the recorded month in the dataset. Some DHS surveys does not use Gregorian calendar (the calendar used in most of the world). For example, the Ethiopian calendar is 92 months behind the Gregorian calendar in general. Then we can set cmc.adjust to 92, which adds 92 months to all dates in the dataset, effectively transforming the Ethiopian calendar to the Gregorian calendar.</p></dd>


<dt id="arg-compact">compact<a class="anchor" aria-label="anchor" href="#arg-compact"></a></dt>
<dd><p>logical indicator of whether the compact format is returned. In the compact output, person months are aggregated by cluster, age, and time. Total number of person months and deaths in each group are returned instead of the raw person-months.</p></dd>


<dt id="arg-compact-by">compact.by<a class="anchor" aria-label="anchor" href="#arg-compact-by"></a></dt>
<dd><p>vector of variables to summarize the compact form by.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function returns a new data frame where each row indicate a person-month, with the additional variables specified in the function argument.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Li, Z., Hsiao, Y., Godwin, J., Martin, B. D., Wakefield, J., Clark, S. J., &amp; with support from the United Nations Inter-agency Group for Child Mortality Estimation and its technical advisory group. (2019). <em>Changes in the spatial distribution of the under-five mortality rate: Small-area analysis of 122 DHS surveys in 262 subregions of 35 countries in Africa.</em> PloS one, 14(1), e0210645.</p>
<p>Mercer, L. D., Wakefield, J., Pantazis, A., Lutambi, A. M., Masanja, H., &amp; Clark, S. (2015). <em>Space-time smoothing of complex survey data: small area estimation for child mortality.</em> The annals of applied statistics, 9(4), 1889.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Zehang Richard Li, Bryan Martin, Laina Mercer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fp</span> <span class="op">&lt;-</span> <span class="st">"/myExampleFilepath/surveyData.DTA"</span></span></span>
<span class="r-in"><span><span class="va">DemoData</span> <span class="op">&lt;-</span> <span class="fu">getBirths</span><span class="op">(</span>filepath <span class="op">=</span> <span class="va">my_fp</span>, surveyyear <span class="op">=</span> <span class="fl">2015</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zehang R Li, Bryan D Martin, Yuan Hsiao, Jessica Godwin, John Paige, Peter Gao, Jon Wakefield, Samuel J Clark, Geir-Arne Fuglstad, Andrea Riebler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

