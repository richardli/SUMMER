<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Adjust direct estimates and their associated variances — getAdjusted • SUMMER</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adjust direct estimates and their associated variances — getAdjusted"><meta name="description" content="Adjust direct estimates and their associated variances"><meta property="og:description" content="Adjust direct estimates and their associated variances"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SUMMER</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/web_only/small-area-estimation.html">Generic small area estimation</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/u5mr-vignette.html">Estimating Subnational U5MR using Simulated Data</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/u5mr-dhs-vignette.html">Estimating Subnational U5MR using DHS Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/richardli/SUMMER/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Adjust direct estimates and their associated variances</h1>
      <small class="dont-index">Source: <a href="https://github.com/richardli/SUMMER/blob/master/R/getAdjusted.R" class="external-link"><code>R/getAdjusted.R</code></a></small>
      <div class="d-none name"><code>getAdjusted.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Adjust direct estimates and their associated variances</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getAdjusted</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">ratio</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  region <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>  est <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  logit <span class="op">=</span> <span class="st">"logit.est"</span>,</span>
<span>  logit.var <span class="op">=</span> <span class="st">"var.est"</span>,</span>
<span>  logit.prec <span class="op">=</span> <span class="st">"logit.prec"</span>,</span>
<span>  logit.lower <span class="op">=</span> <span class="st">"lower"</span>,</span>
<span>  logit.upper <span class="op">=</span> <span class="st">"upper"</span>,</span>
<span>  prob.lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prob.upper <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adj <span class="op">=</span> <span class="st">"ratio"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data frame of the adjusted estimates and the associated uncertainties, see the arguments below for specific columns.</p></dd>


<dt id="arg-ratio">ratio<a class="anchor" aria-label="anchor" href="#arg-ratio"></a></dt>
<dd><p>the ratio of unadjusted mortality rates to the true mortality rates. It can be either a data frame with the following three columns (region, time, and adj) if adjustment factor differ by region; or a data frame with the following two columns (time and adj) if adjustment factor only varies over time. The column names specifying region, time, and adjustment are specified by the arguments in the function call.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>the column name for time in the data and adjustment ratio.</p></dd>


<dt id="arg-region">region<a class="anchor" aria-label="anchor" href="#arg-region"></a></dt>
<dd><p>the column name for region in the data  and adjustment ratio.</p></dd>


<dt id="arg-est">est<a class="anchor" aria-label="anchor" href="#arg-est"></a></dt>
<dd><p>the column name for unadjusted mortality rates in the data</p></dd>


<dt id="arg-logit">logit<a class="anchor" aria-label="anchor" href="#arg-logit"></a></dt>
<dd><p>the column name for the logit of the unadjusted mortality rates in the data</p></dd>


<dt id="arg-logit-var">logit.var<a class="anchor" aria-label="anchor" href="#arg-logit-var"></a></dt>
<dd><p>the column name for the variance of the logit of the unadjusted mortality rates in the data</p></dd>


<dt id="arg-logit-prec">logit.prec<a class="anchor" aria-label="anchor" href="#arg-logit-prec"></a></dt>
<dd><p>the column name for the precision of the logit of the unadjusted mortality rates in the data</p></dd>


<dt id="arg-logit-lower">logit.lower<a class="anchor" aria-label="anchor" href="#arg-logit-lower"></a></dt>
<dd><p>the column name for the 95% lower bound of the logit of the unadjusted mortality rates in the data</p></dd>


<dt id="arg-logit-upper">logit.upper<a class="anchor" aria-label="anchor" href="#arg-logit-upper"></a></dt>
<dd><p>the column name for the 95% lower bound of the logit of the unadjusted mortality rates in the data</p></dd>


<dt id="arg-prob-lower">prob.lower<a class="anchor" aria-label="anchor" href="#arg-prob-lower"></a></dt>
<dd><p>the column name for the 95% lower bound of the unadjusted mortality rates in the data. If this is provided instead of logit.lower, the logit scale lower bound will be created.</p></dd>


<dt id="arg-prob-upper">prob.upper<a class="anchor" aria-label="anchor" href="#arg-prob-upper"></a></dt>
<dd><p>the column name for the 95% lower bound of the unadjusted mortality rates in the data. if this is provided instead of logit.upper, the logit scale upper bound will be created.</p></dd>


<dt id="arg-adj">adj<a class="anchor" aria-label="anchor" href="#arg-adj"></a></dt>
<dd><p>the column name for the adjustment ratio</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical indicator for whether to print out unadjusted row index</p></dd>


<dt id="arg-lower">lower<a class="anchor" aria-label="anchor" href="#arg-lower"></a></dt>
<dd><p>previous argument name for prob.lower. Will be removed in the next update</p></dd>


<dt id="arg-upper">upper<a class="anchor" aria-label="anchor" href="#arg-upper"></a></dt>
<dd><p>previous argument name for prob.upper. Will be removed in the next update</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>adjusted dataset of the same columns.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Zehang Richard Li</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">DemoData</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">time</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># obtain direct estimates</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDirectList.html">getDirectList</a></span><span class="op">(</span>births <span class="op">=</span> <span class="va">DemoData</span>, </span></span>
<span class="r-in"><span>years <span class="op">=</span> <span class="va">years</span>,  </span></span>
<span class="r-in"><span>regionVar <span class="op">=</span> <span class="st">"region"</span>, timeVar <span class="op">=</span> <span class="st">"time"</span>, </span></span>
<span class="r-in"><span>clusterVar <span class="op">=</span> <span class="st">"~clustid+id"</span>, </span></span>
<span class="r-in"><span>ageVar <span class="op">=</span> <span class="st">"age"</span>, weightsVar <span class="op">=</span> <span class="st">"weights"</span>, </span></span>
<span class="r-in"><span>geo.recode <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># obtain direct estimates</span></span></span>
<span class="r-in"><span><span class="va">data_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="getDirectList.html">getDirectList</a></span><span class="op">(</span>births <span class="op">=</span> <span class="va">DemoData</span>, years <span class="op">=</span> <span class="va">years</span>,</span></span>
<span class="r-in"><span>  regionVar <span class="op">=</span> <span class="st">"region"</span>,  timeVar <span class="op">=</span> <span class="st">"time"</span>, clusterVar <span class="op">=</span> <span class="st">"~clustid+id"</span>,</span></span>
<span class="r-in"><span>  ageVar <span class="op">=</span> <span class="st">"age"</span>, weightsVar <span class="op">=</span> <span class="st">"weights"</span>, geo.recode <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="aggregateSurvey.html">aggregateSurvey</a></span><span class="op">(</span><span class="va">data_multi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># randomly simulate adjustment factor</span></span></span>
<span class="r-in"><span><span class="va">adj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>, years <span class="op">=</span> <span class="va">years</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">adj</span><span class="op">$</span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">adj</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, min <span class="op">=</span> <span class="fl">0.5</span>, max <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data.adj</span> <span class="op">&lt;-</span> <span class="fu">getAdjusted</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, ratio <span class="op">=</span> <span class="va">adj</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zehang R Li, Bryan D Martin, Yuan Hsiao, Jessica Godwin, John Paige, Peter Gao, Jon Wakefield, Samuel J Clark, Geir-Arne Fuglstad, Andrea Riebler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

